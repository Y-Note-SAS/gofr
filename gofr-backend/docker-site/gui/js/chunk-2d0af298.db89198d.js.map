{"version":3,"sources":["webpack:///./src/components/gofr/gofr-array.vue?0766","webpack:///src/components/gofr/gofr-array.vue","webpack:///./src/components/gofr/gofr-array.vue?5a6d","webpack:///./src/components/gofr/gofr-array.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","$store","state","cols","header","_v","_s","$t","label","simpleValue","on","$event","removeRow","_e","addRow","_l","input","_t","source","staticRenderFns","name","props","data","inputs","isArray","lockWatch","created","setupInputs","watch","slotProps","handler","deep","methods","expression","field","replace","$fhirpath","evaluate","push","splice","getField","computed","actualMin","Math","max","addAvailable","length","displayIndex","subAvailable","simpleDisplay","edit","join","component","VBtn","VCard","VCol","VContainer","VDivider","VIcon","VRow","VSpacer","VSystemBar"],"mappings":"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","file":"js/chunk-2d0af298.db89198d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.simpleDisplay)?_c('div',[_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{staticClass:\"font-weight-bold\",attrs:{\"cols\":_vm.$store.state.cols.header}},[_vm._v(\" \"+_vm._s(_vm.$t((\"App.fhir-resources-texts.\" + _vm.label)))+\" \")]),_c('v-col',{attrs:{\"cols\":_vm.$store.state.cols.header}},[_vm._v(_vm._s(_vm.simpleValue))])],1),_c('v-divider')],1):_c('v-container',[_c('v-card',[(_vm.edit)?_c('v-system-bar',{attrs:{\"color\":\"secondary\",\"dark\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$t((\"App.fhir-resources-texts.\" + _vm.label)))+\" \"),_c('v-spacer'),(_vm.subAvailable)?_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.removeRow()}}},[_c('v-icon',{staticClass:\"font-weight-bold\"},[_vm._v(\"mdi-minus\")])],1):_vm._e(),(_vm.addAvailable)?_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.addRow()}}},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1):_vm._e()],1):_vm._e(),_vm._l((_vm.inputs),function(input){return _vm._t(\"default\",null,{\"input\":input,\"source\":input.source})})],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div v-if=\"simpleDisplay\">\n      <v-row dense>\n        <v-col :cols=\"$store.state.cols.header\" class=\"font-weight-bold\">\n          {{ $t(`App.fhir-resources-texts.${label}`) }}\n        </v-col>\n        <v-col :cols=\"$store.state.cols.header\">{{simpleValue}}</v-col>\n      </v-row>\n      <v-divider></v-divider>\n    </div>\n    <v-container v-else>\n      <v-card>\n        <v-system-bar\n          color=\"secondary\"\n          dark\n          v-if=\"edit\"\n          >\n          {{ $t(`App.fhir-resources-texts.${label}`) }}\n          <v-spacer></v-spacer>\n          <v-btn v-if=\"subAvailable\" icon @click=\"removeRow()\"><v-icon class=\"font-weight-bold\">mdi-minus</v-icon></v-btn>\n          <v-btn v-if=\"addAvailable\" icon @click=\"addRow()\"><v-icon>mdi-plus</v-icon></v-btn>\n        </v-system-bar>\n        <slot v-for=\"input in inputs\" :input=\"input\" :source=\"input.source\"></slot>\n      </v-card>\n    </v-container>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"gofr-array\",\n  props: [\"label\", \"min\", \"max\", \"id\", \"path\", \"slotProps\", \"field\", \"fieldType\", \"profile\", \"targetProfile\", \"sliceName\", \"edit\" ],\n  data: function() {\n    return {\n      inputs: [],\n      source: { path: \"\", data: [] },\n      isArray: true,\n      lockWatch: false\n    }\n  },\n  created: function() {\n    this.setupInputs()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        if ( !this.lockWatch ) {\n          //console.log(\"WATCHARR\",this.path,this.slotProps.source)\n          this.setupInputs()\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    setupInputs: function() {\n      this.inputs = []\n      this.source = { path: this.path, data: {} }\n      let path = this.path\n      if ( this.slotProps && this.slotProps.source ) {\n        let expression = this.field\n        if ( this.sliceName ) {\n          expression = this.field.replace(/([^:]+):(.+)/, \"$1.where(url='\"+this.profile+\"')\")\n        }\n        this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression)\n        if ( this.source.data.length > 0 ) {\n          this.lockWatch = true\n        }\n      }\n      for( let idx = 0; idx < this.actualMin; idx++ ) {\n        let label = this.label\n        if ( this.displayIndex ) {\n          label += \" (\"+(idx+1)+\")\"\n        }\n        let input = { label: label, index: idx, data: undefined }\n        if ( this.source.data[idx] ) {\n          input.source = { data: this.source.data[idx], path: path+\"[\"+idx+\"]\", fromArray: true }\n        }\n        this.inputs.push( input )\n      }\n    },\n    addRow: function() {\n      this.lockWatch = true\n      if ( this.addAvailable ) {\n        let label = this.label\n        if ( this.displayIndex ) {\n          label += \" (\"+(this.inputs.length+1)+\")\"\n        }\n        this.inputs.push( { label: label, index: this.inputs.length } )\n      }\n    },\n    removeRow: function() {\n      if ( this.subAvailable ) {\n        this.inputs.splice(-1)\n      }\n    },\n    getField: function() {\n      return this.field\n    }\n  },\n  computed: {\n    actualMin: function() {\n      return Math.max( this.min, ( this.source.data.length > 0 ? this.source.data.length : 0 ) )\n      //return this.min < 1 ? 1 : this.min\n    },\n    addAvailable: function() {\n      return this.max === \"*\" || this.inputs.length < this.max\n    },\n    displayIndex: function() {\n      return this.max === \"*\" || this.max > 1\n    },\n    subAvailable: function() {\n      return this.actualMin < this.inputs.length\n    },\n    simpleDisplay: function() {\n      return !this.edit && [ \"string\" ].includes(this.fieldType)\n    },\n    simpleValue: function() {\n      return this.source.data.join(\" \")\n    }\n\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gofr-array.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gofr-array.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./gofr-array.vue?vue&type=template&id=665611b6&\"\nimport script from \"./gofr-array.vue?vue&type=script&lang=js&\"\nexport * from \"./gofr-array.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSystemBar } from 'vuetify/lib/components/VSystemBar';\ninstallComponents(component, {VBtn,VCard,VCol,VContainer,VDivider,VIcon,VRow,VSpacer,VSystemBar})\n"],"sourceRoot":""}