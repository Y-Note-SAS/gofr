(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c17b7"],{"45dd":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("gofr-element",{attrs:{edit:e.edit,loading:!1},scopedSlots:e._u([{key:"form",fn:function(){return[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({attrs:{label:e.$t("App.fhir-resources-texts."+e.label),"prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"","hide-details":"auto",rules:e.rules,"error-messages":e.errors,dense:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.$t("App.fhir-resources-texts."+e.label))+" "),e.required?a("span",{staticClass:"red--text font-weight-bold"},[e._v("*")]):e._e()]},proxy:!0}],null,!0),model:{value:e.displayValue,callback:function(t){e.displayValue=t},expression:"displayValue"}},i))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e.isEthiopian?a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-card",{attrs:{"min-width":"300px"}},[a("v-card-title",{staticClass:"primary white--text"},[e._v(" Ethiopian Calendar"),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{dark:"",icon:"",group:"",small:""},on:{click:function(t){e.showGregorian=!e.showGregorian}}},[e.showGregorian?a("v-icon",[e._v("mdi-calendar")]):a("v-icon",[e._v("mdi-calendar-multiple")])],1)],1),"year"===e.pickerType?a("v-card-text",[a("br"),a("v-text-field",{attrs:{clearable:"",type:"number",disabled:e.disabled,label:e.$t("App.fhir-resources-texts."+e.label),min:e.minYear,max:e.maxYear,rules:e.rules,"error-messages":e.errors,dense:""},on:{change:function(t){e.errors=[]}},model:{value:e.etValue,callback:function(t){e.etValue=t},expression:"etValue"}})],1):a("v-ethiopian-date-picker",{ref:"etPicker",attrs:{label:"Ethiopian",color:"secondary",landscape:e.$vuetify.breakpoint.smAndUp,max:e.maxValueETDateTime,min:e.minValueETDateTime,type:e.pickerType,disabled:e.disabled,locale:"am"},on:{change:e.save},model:{value:e.etValue,callback:function(t){e.etValue=t},expression:"etValue"}})],1),e.showGregorian?a("v-card",{attrs:{"min-width":"300px"}},[a("v-card-title",{staticClass:"primary white--text"},[e._v(" Gregorian Calendar"),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{dark:"",icon:"",group:"",small:""},on:{click:function(t){e.showGregorian=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),"year"===e.pickerType?a("v-card-text",[a("br"),a("v-text-field",{attrs:{clearable:"",type:"number",disabled:e.disabled,label:e.$t("App.fhir-resources-texts."+e.label),min:e.minYear,max:e.maxYear,rules:e.rules,"error-messages":e.errors,dense:""},on:{change:function(t){e.errors=[]}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):a("v-date-picker",{ref:"gPicker",attrs:{color:"secondary",landscape:e.$vuetify.breakpoint.smAndUp,max:e.dateValueMax,min:e.dateValueMin,type:e.pickerType,disabled:e.disabled},on:{change:e.save},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e()],1)],1):"year"===e.pickerType?a("v-card",{attrs:{"min-width":"300px"}},[a("v-card-text",[a("br"),a("v-text-field",{attrs:{type:"number",disabled:e.disabled,label:e.$t("App.fhir-resources-texts."+e.label),min:e.minYear,max:e.maxYear,rules:e.rules,"error-messages":e.errors,dense:""},on:{change:function(t){e.errors=[]}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1):a("v-date-picker",{ref:"picker",attrs:{color:"secondary",landscape:e.$vuetify.breakpoint.smAndUp,max:e.dateValueMax,min:e.dateValueMin,type:e.pickerType,disabled:e.disabled},on:{change:e.save},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)]},proxy:!0},{key:"header",fn:function(){return[e._v(" "+e._s(e.$t("App.fhir-resources-texts."+e.label))+" ")]},proxy:!0},{key:"value",fn:function(){return[e._v(" "+e._s(e.displayValue)+" ")]},proxy:!0}])})},r=[],n=a("3835"),s=(a("ac1f"),a("466d"),a("d81d"),a("1276"),a("a9e3"),a("4d90"),a("d3b7"),a("25f0"),a("d79a")),l=a("c472"),o=a("08e0"),u=a.n(o),c={name:"fhir-date-time",props:["field","min","max","base-min","base-max","label","slotProps","path","edit","sliceName","minValueDateTime","maxValueDateTime","minValueQuantity","maxValueQuantity","displayType","readOnlyIfSet","calendar","constraints"],components:{GofrElement:s["a"],VEthiopianDatePicker:l["a"]},data:function(){return{value:null,etValue:null,menu:!1,source:{path:"",data:{}},qField:"valueDateTime",pickerType:"date",disabled:!1,showGregorian:!1,errors:[],lockWatch:!1}},created:function(){this.setupData()},computed:{dateValueMax:function(){if(this.maxValueQuantity){var e=this.convertQuantity(this.maxValueQuantity,"add");if(e)return e}if(this.maxValueDate)return this.maxValueDate},dateValueMin:function(){if(this.minValueQuantity){var e=this.convertQuantity(this.minValueQuantity,"subtract");if(e)return e}else if(this.minValueDate)return this.minValueDate},minYear:function(){return this.dateValueMin?this.dateValueMin.substring(0,4):void 0},maxYear:function(){return this.dateValueMax?this.dateValueMax.substring(0,4):void 0},minYearET:function(){return this.minValueETDate?this.minValueETDate.substring(0,4):void 0},maxYearET:function(){return this.maxValueETDate?this.maxValueETDate.substring(0,4):void 0},isEthiopian:function(){return"Ethiopian"===this.calendar},minValueETDateTime:function(){return this.dateValueMin?this.convertGE(this.dateValueMin):null},maxValueETDateTime:function(){return this.dateValueMax?this.convertGE(this.dateValueMax):null},displayValue:function(){return this.isEthiopian?this.value&&"Ethiopian: "+this.etValue+" Gregorian: "+this.value:this.value},index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},required:function(){return(this.index||0)<this.min},rules:function(){var e=this;return this.required?[function(t){return!!t||e.label+" is required"}]:[]}},watch:{menu:function(e){var t=this;this.isEthiopian?!this.value&&e&&setTimeout((function(){return t.$refs.etPicker.activePicker="YEAR"})):!this.value&&e&&setTimeout((function(){return t.$refs.picker.activePicker="YEAR"}))},showGregorian:function(e){var t=this;!this.value&&e&&setTimeout((function(){return t.$refs.gPicker.activePicker="YEAR"}))},slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0},value:function(e){e?"year"===this.pickerType?4===e.length&&(this.etValue=this.convertGE(e)):this.etValue=this.convertGE(e):this.etValue=e},etValue:function(e){e?"year"===this.pickerType?4===e.length&&(this.value=this.convertEG(e)):this.value=this.convertEG(e):this.value=e}},methods:{convertQuantity:function(e,t){var a={a:"years",mo:"months",wk:"weeks",d:"days"},i=/(-?\d+)([a-z]{1,3})/,r=e.match(i);if(3===r.length)try{var n=r[1],s=a[r[2]];return"subtract"===t?this.$moment(this.$moment().subtract(n,s)).format("YYYY-MM-DD"):this.$moment(this.$moment().add(n,s)).format("YYYY-MM-DD")}catch(l){console.log("Failed to get date from quantity",l)}},convertGE:function(e){if(!e)return e;var t=e.split("-").map(Number),a=Object(n["a"])(t,3),i=a[0],r=a[1],s=a[2];if("year"===this.pickerType){var l=u.a.ge(i,r||6,s||1);return l.year.toString().padStart(4,"0")}var o=u.a.ge(i,r||1,s||1);return o.year.toString().padStart(4,"0")+"-"+o.month.toString().padStart(2,"0")+"-"+o.day.toString().padStart(2,"0")},convertEG:function(e){if(!e)return e;var t=e.split("-").map(Number),a=Object(n["a"])(t,3),i=a[0],r=a[1],s=a[2];if("year"===this.pickerType){var l=u.a.eg(i,r||6,s||1);return l.year.toString().padStart(4,"0")}var o=u.a.eg(i,r||1,s||1);return o.year.toString().padStart(4,"0")+"-"+o.month.toString().padStart(2,"0")+"-"+o.day.toString().padStart(2,"0")},setupData:function(){if(this.displayType&&(this.pickerType=this.displayType),this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data,this.lockWatch=!0;else{var e=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e),1==this.source.data.length&&(this.value=this.source.data[0],this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}},save:function(e){this.errors=[],this.$refs.menu.save(e)}}},d=c,h=a("2877"),p=a("6544"),m=a.n(p),v=a("8336"),f=a("b0af"),y=a("99d9"),x=a("a523"),b=a("2e4b"),V=a("132d"),k=a("e449"),g=a("0fd9"),T=a("2fa4"),E=a("8654"),w=Object(h["a"])(d,i,r,!1,null,null,null);t["default"]=w.exports;m()(w,{VBtn:v["a"],VCard:f["a"],VCardText:y["c"],VCardTitle:y["d"],VContainer:x["a"],VDatePicker:b["a"],VIcon:V["a"],VMenu:k["a"],VRow:g["a"],VSpacer:T["a"],VTextField:E["a"]})}}]);
//# sourceMappingURL=chunk-2d0c17b7.924c29ec.js.map