{"version":3,"sources":["webpack:///./node_modules/querystring-es3/decode.js","webpack:///./node_modules/querystring-es3/index.js","webpack:///./node_modules/querystring-es3/encode.js","webpack:///./src/components/gofr/gofr-search-reference-term.vue?e34d","webpack:///src/components/gofr/gofr-search-reference-term.vue","webpack:///./src/components/gofr/gofr-search-reference-term.vue?529e","webpack:///./src/components/gofr/gofr-search-reference-term.vue"],"names":["hasOwnProperty","obj","prop","Object","prototype","call","module","exports","qs","sep","eq","options","length","regexp","split","maxKeys","len","i","kstr","vstr","k","v","x","replace","idx","indexOf","substr","decodeURIComponent","isArray","push","Array","xs","toString","decode","parse","encode","stringify","stringifyPrimitive","isFinite","name","undefined","map","objectKeys","ks","encodeURIComponent","join","f","res","keys","key","render","_vm","this","_h","$createElement","_c","_self","displayType","ref","attrs","scopedSlots","_u","fn","on","_g","$t","display","loading","$event","clearSearch","_v","_s","proxy","model","value","callback","$$v","displayValue","expression","menu","active","items","fetchChildren","open","search","select","staticRenderFns","props","data","source","qField","resource","awaitingSearch","preset","disabled","errors","lockWatch","treeLookup","allAllowed","created","setupData","watch","slotProps","handler","deep","setTimeout","val","reference","updateSearch","methods","$emit","targetResource","setupTreeItems","results","readOnlyIfSet","treetop","overrideValue","params","_count","addItems","checkChildren","Promise","item","children","resolve","console","log","checkLoading","querySelections","_profile","targetProfile","computed","index","component","VAutocomplete","VCard","VMenu","VTextField","VTreeview"],"mappings":"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","file":"js/chunk-0a6b076a.622831ac.js","sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.displayType == 'tree')?_c('v-menu',{ref:\"menu\",attrs:{\"close-on-content-click\":false,\"transition\":\"scale-transition\",\"offset-y\":\"\",\"min-width\":\"290px\",\"max-height\":\"500px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-text-field',_vm._g({attrs:{\"label\":_vm.$t((\"App.fhir-resources-texts.\" + _vm.display)),\"outlined\":\"\",\"hide-details\":\"auto\",\"loading\":_vm.loading,\"dense\":\"\",\"shaped\":\"\",\"clearable\":\"\"},on:{\"click:clear\":function($event){return _vm.clearSearch()}},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_vm._v(_vm._s(_vm.$t((\"App.fhir-resources-texts.\" + _vm.display))))]},proxy:true}],null,true),model:{value:(_vm.displayValue),callback:function ($$v) {_vm.displayValue=$$v},expression:\"displayValue\"}},on))]}}],null,false,3505724966),model:{value:(_vm.menu),callback:function ($$v) {_vm.menu=$$v},expression:\"menu\"}},[_c('v-card',[_c('v-treeview',{attrs:{\"active\":_vm.active,\"items\":_vm.items,\"load-children\":_vm.fetchChildren,\"open\":_vm.open,\"item-disabled\":\"locked\",\"activatable\":\"\",\"multiple-active\":false,\"selection-type\":\"independent\",\"loading\":_vm.loading},on:{\"update:active\":function($event){_vm.active=$event},\"update:open\":function($event){_vm.open=$event}}})],1)],1):_c('v-autocomplete',{attrs:{\"loading\":_vm.loading,\"items\":_vm.items,\"search-input\":_vm.search,\"cache-items\":\"\",\"flat\":\"\",\"hide-no-data\":\"\",\"hide-details\":\"\",\"label\":_vm.$t((\"App.fhir-resources-texts.\" + _vm.display)),\"outlined\":\"\",\"dense\":\"\",\"placeholder\":\"Start typing for selection\"},on:{\"update:searchInput\":function($event){_vm.search=$event},\"update:search-input\":function($event){_vm.search=$event},\"click:clear\":function($event){return _vm.clearSearch()}},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_vm._v(_vm._s(_vm.$t((\"App.fhir-resources-texts.\" + _vm.display))))]},proxy:true}]),model:{value:(_vm.select),callback:function ($$v) {_vm.select=$$v},expression:\"select\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-menu\n    v-if=\"displayType == 'tree'\"\n    ref=\"menu\"\n    v-model=\"menu\"\n    :close-on-content-click=\"false\"\n    transition=\"scale-transition\"\n    offset-y\n    min-width=\"290px\"\n    max-height=\"500px\"\n    >\n    <template v-slot:activator=\"{ on }\">\n      <v-text-field\n        v-model=\"displayValue\"\n        :label=\"$t(`App.fhir-resources-texts.${display}`)\"\n        v-on=\"on\"\n        outlined\n        hide-details=\"auto\"\n        :loading=\"loading\"\n        @click:clear=\"clearSearch()\"\n        dense\n        shaped \n        clearable\n      >\n        <template #label>{{$t(`App.fhir-resources-texts.${display}`)}}</template>\n      </v-text-field>\n    </template>\n    <v-card>\n      <v-treeview\n        :active.sync=\"active\"\n        :items=\"items\"\n        :load-children=\"fetchChildren\"\n        :open.sync=\"open\"\n        item-disabled=\"locked\"\n        activatable\n        :multiple-active=\"false\"\n        selection-type=\"independent\"\n        :loading=\"loading\"\n      ></v-treeview>\n    </v-card>\n  </v-menu>\n  <v-autocomplete\n    v-else\n    v-model=\"select\"\n    :loading=\"loading\"\n    :items=\"items\"\n    :search-input.sync=\"search\"\n    cache-items\n    flat\n    hide-no-data\n    hide-details\n    :label=\"$t(`App.fhir-resources-texts.${display}`)\"\n    outlined\n    dense\n    placeholder=\"Start typing for selection\"\n    @click:clear=\"clearSearch()\"\n  >\n    <template #label>{{$t(`App.fhir-resources-texts.${display}`)}}</template>\n  </v-autocomplete>\n</template>\n\n<script>\nimport axios from 'axios'\n\nconst querystring = require('querystring')\nconst fhirurl = \"http://hl7.org/fhir/StructureDefinition/\"\nexport default {\n  name: \"fhir-reference\",\n  props: [\"field\",\"label\",\"expression\",\"targetProfile\",\"targetResource\",\"slotProps\",\"edit\",\"readOnlyIfSet\", \"displayType\", \"initialValue\", \"overrideValue\"],\n  data: function() {\n    return {\n      source: { path: \"\", data: {} },\n      value: { reference: \"\" },\n      qField: \"valueReference\",\n      loading: false,\n      search: \"\",\n      menu: false,\n      items: [],\n      select: \"\",\n      resource: \"\",\n      awaitingSearch: false,\n      displayValue: \"\",\n      preset: false,\n      disabled: false,\n      errors: [],\n      lockWatch: false,\n      active: [],\n      open: [],\n      treeLookup: {},\n      allAllowed: true\n    }\n  },\n  created: function() {\n    this.setupData()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    },\n    search: function (val) {\n      if ( !this.awaitingSearch) {\n        setTimeout( () => {\n          val && val.length > 1 && this.querySelections( this.search )\n          this.awaitingSearch = false\n        }, 500 )\n      }\n      this.awaitingSearch = true\n    },\n    select: function(val) {\n      this.value.reference = val\n      this.updateSearch()\n    },\n    active: function() {\n      if ( this.active.length ) {\n        this.select = this.active[0]\n        this.displayValue = this.treeLookup[ this.select ]\n      } else {\n        this.select = undefined\n        this.displayValue = \"\"\n      }\n      this.menu = false\n    }\n  },\n  methods: {\n    updateSearch: function() {\n      this.$emit('termChange', this.expression, this.value.reference)\n    },\n    clearSearch: function() {\n      this.$emit('termChange', this.expression, [])\n    },\n    setupData: function() {\n      if ( this.targetProfile && this.targetResource ) {\n        if ( this.targetProfile.replace( fhirurl, \"\" ) === this.targetResource ) {\n          this.allAllowed = true\n        } else {\n          this.allAllowed = false\n        }\n        this.resource = this.targetResource\n      }\n      if ( this.displayType === \"tree\" ) {\n        this.setupTreeItems()\n      }\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          let results = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          this.source.data = results[0]\n        }\n        if( this.source.data ) {\n          this.preset = true\n          this.select = this.source.data.reference\n          this.lockWatch = true\n        }\n      }\n      this.disabled = this.readOnlyIfSet && this.preset\n    },\n    setupTreeItems: function() {\n      let treetop = this.initialValue\n      if ( this.overrideValue ) {\n        treetop = this.overrideValue\n      }\n      this.loading = true\n      let params = {}\n      if ( treetop ) {\n        params = { \"partof\": treetop }\n      } else {\n        params = { \"partof:missing\": true }\n      }\n      params._count = 200\n      let url = \"/fhir/\"+this.$store.state.config.userConfig.FRDatasource+\"/\"+this.resource+\"?\"+querystring.stringify( params )\n      this.items = []\n      this.addItems( url, this.items )\n\n    },\n    checkChildren: function(item) {\n      let params = { \"partof\": item.id, \"_summary\": \"count\" }\n      let url = \"/fhir/\"+this.$store.state.config.userConfig.FRDatasource+\"/\"+this.resource+\"?\"+querystring.stringify( params )\n      return new Promise( resolve => {\n        axios.get( url ).then( response => {\n          let data = response.data\n          if ( data.total && data.total > 0 ) {\n            item.children = []\n          }\n          resolve()\n        } ).catch( err => {\n          console.log(\"failed to check children for\",url,err)\n          resolve()\n        } )\n      } )\n    },\n    addItems: function(url, items) {\n      axios.get( url ).then( async(response) => {\n        let data = response.data\n        if ( data.entry && data.entry.length > 0 ) {\n          for( let entry of data.entry ) {\n            let locked = this.allAllowed ? false : !entry.resource.meta.profile || !entry.resource.meta.profile.includes( this.targetProfile )\n            let item = {\n              id: entry.resource.resourceType+\"/\"+entry.resource.id,\n              name: entry.resource.name,\n              locked: locked\n            }\n            await this.checkChildren( item )\n            this.treeLookup[ item.id ] = item.name\n            items.push( item )\n          }\n        }\n        if ( data.link ) {\n          let next = data.link.find( link => link.relation === \"next\" )\n          if ( next ) {\n            this.addItems( next.url, items )\n          } else {\n            this.loading = false\n          }\n        } else {\n          this.loading = false\n        }\n      } ).catch( err => {\n        console.log(\"Failed to add items for\",url,err)\n        this.loading = false\n      } )\n    },\n    fetchChildren: function(item) {\n      let params = {}\n      params = { \"partof\": item.id, _count: 500 }\n      let url = \"/fhir/\"+this.$store.state.config.userConfig.FRDatasource+\"/\"+this.resource+\"?\"+querystring.stringify( params )\n      this.loading = true\n      this.addItems( url, item.children )\n      return new Promise( resolve => {\n        let count = 0\n        const checkLoading = () => {\n          if ( !this.loading || count++ > 100) {\n            resolve()\n          } else {\n            setTimeout( checkLoading, 200 )\n          }\n        }\n        checkLoading()\n      } )\n    },\n    querySelections: function( val ) {\n      this.loading = true\n      let params = { \"name:contains\": val }\n      if ( !this.targetProfile.endsWith( this.resource ) ) {\n        params._profile = this.targetProfile\n      }\n      let url = \"/fhir/\"+this.$store.state.config.userConfig.FRDatasource+\"/\"+this.resource+\"?\"+querystring.stringify( params )\n      axios.get( url ).then( async(response) => {\n        let data = response.data\n        this.items = []\n        if ( data.entry && data.entry.length ) {\n          for( let entry of data.entry ) {\n            let ref = entry.resource.resourceType+\"/\"+entry.resource.id\n            let item = { value: ref }\n            item.text = await this.$fhirutils.resourceLookup( ref )\n            this.items.push( item )\n          }\n        }\n      } )\n    },\n    // getDisplay: function() {\n    //   if ( (!this.edit || this.preset) && this.value && this.value.reference ) {\n    //     this.loading = true\n    //     this.$fhirutils.resourceLookup( this.value.reference ).then( display => {\n    //       console.log(display);\n    //       this.displayValue = display\n    //       if ( this.displayType !== \"tree\" ) {\n    //         this.items.push( {text: display, value: this.value.reference} )\n    //       }\n    //       this.loading = false\n    //     } )\n    //   }\n    // }\n  },\n  computed: {\n    index: function() {\n      if ( this.slotProps ) return this.slotProps.input\n      else return undefined\n    },\n    display: function() {\n      if ( this.slotProps && this.slotProps.input) return this.slotProps.input.label\n      else return this.label\n    },\n  }\n\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gofr-search-reference-term.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gofr-search-reference-term.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./gofr-search-reference-term.vue?vue&type=template&id=85351524&\"\nimport script from \"./gofr-search-reference-term.vue?vue&type=script&lang=js&\"\nexport * from \"./gofr-search-reference-term.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAutocomplete } from 'vuetify/lib/components/VAutocomplete';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTreeview } from 'vuetify/lib/components/VTreeview';\ninstallComponents(component, {VAutocomplete,VCard,VMenu,VTextField,VTreeview})\n"],"sourceRoot":""}